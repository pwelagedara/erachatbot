var chatbox=angular.module("chatbox",[]);chatbox.directive("chatbox",function(){return{restrict:"EA",scope:{ngCity:"@",ngCountry:"@",ngFname:"@"},template:'<div class="circle_chatbox">{{ngCountry}}</div><div class="chat-block" ng-show="showChat">   <div class="msg_head">{{ngFname}}</div>   <div class="msg_wrap">    <div class="msg_body">    <div><div class="msg_a" hidden="true">tr</div></div>     <div><div class="msg_b" hidden="true">trtr</div></div>   <div class="msg_push"><p class="enter-msg">{{response}}</p></div>     </div>    </div>   <input type="text" ng-model="Userinput.text" />    <button ng-click="sayChat()" class="send">CHAT</button>    <button class="send">HELPER</button></div><div class="circle_menu" ng-click="click()"><i class="fa fa-plus menu_btn" ng-show="!showChat"></i><i class="fa fa-times menu_btn" ng-show="showChat"></i></div>',controller:["$scope","$http",function(t,e){function o(t){if(!angular.isObject(t))return null==t?"":t.toString();var e=[];for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];e.push(encodeURIComponent(o)+"="+encodeURIComponent(null==n?"":n))}var s=e.join("&").replace(/%20/g,"+");return s}function n(e){return e.replace("|VAR.FIRSTNAME|",t.ngFname)}function s(e){return e.indexOf("|DIR.ROUTE_TO_BOT|")>-1?(t.state=0,e.replace("|DIR.ROUTE_TO_BOT|","")):e.indexOf("|DIR.ROUTE_TO_AI|")>-1?(t.state=1,e.replace("|DIR.ROUTE_TO_AI|","")):e.indexOf("|DIR.ROUTE_TO_OPERATOR|")>-1?(t.state=2,e.replace("|DIR.ROUTE_TO_OPERATOR|","")):e}function i(){return""==t.Userinput.text?void console.log("ERROR nothing to send"):void e({method:"POST",url:"http://alicia.rdeshapriya.com/chatbot/conversation_start.php",dataType:"json",data:o({say:t.Userinput.text}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){console.log("SUCCESS response from bot"),console.log(e),console.log(e.botsay),e.botsay="|DIR.ROUTE_TO_AI|";var o=n(s(e.botsay));return console.log("Response and state"),console.log(o),console.log(t.state),1==t.state?void a():(2==t.state&&console.log("ERROR state change from 0 to 2"),t.Userinput.text="",void $('<div class="msg_a">'+o+"</div>").insertBefore(".enter-msg"))}).error(function(){console.log("ERROR in bot response; routing to AI"),t.state=1,a()})}function a(){return""==t.Userinput.text?void console.log("ERROR nothing to send"):void e({method:"POST",url:"http://user-PC:8000/aisay",dataType:"json",data:o({msg:"what is my name?"}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){console.log("SUCCESS response from AI"),console.log(e),console.log(e[0]);var o=n(s(e[0].toString()));console.log("Response and state"),console.log(o),console.log(t.state),2!=t.state&&(0==t.state&&console.log("ERROR state change from 1 to 0"),t.Userinput.text="",$('<div class="msg_a">'+o+"</div>").insertBefore(".enter-msg"))}).error(function(){console.log("ERROR in AI response")})}function c(){}t.state=0,t.Userinput={},t.Userinput.text="",t.clicked=0,t.showChat=!1,t.click=function(){t.clicked++,t.showChat=!t.showChat,console.log(t.clicked)},t.sayChat=function(){""==t.Userinput.text?console.log("ERROR nothing to send"):($('<div class="msg_b">'+t.Userinput.text+"</div>").insertBefore(".enter-msg"),0==t.state?i():1==t.state?a():2==t.state&&c())}}],link:function(){}}}),chatbox.directive("ngCity",function(){return{controller:function(){}}});
//# sourceMappingURL=chatbox-directive.min.js.map